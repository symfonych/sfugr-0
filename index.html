<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>SUGAR-01 - Symfony User Group Around Romandie 1</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/beige.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<style type="text/css">
			.reveal section img {
				background: transparent;
				border: none;
				box-shadow: 0 0 0 transparent;
			}
		</style>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

				<section>
					<h1>SFUGR 0</h1>
					<h3>Symfony User Group Romandie</h3>
				</section>

				<section>
					<h2>Today</h2>
					<ol>
						<li><a href="#/about">About the group</a></li>
						<li><a href="#/capifony">Capifony</a></li>
						<li><a href="#/feedback">Feedback from SUGZH</a></li>
						<li><a href="#/catering">Catering</a></li>
					</ol>
				</section>

				<!-- Example of nested vertical slides -->
				<section id="about">
					<section>
						<img src="assets/meetup_sfugr.png" border="0">
					</section>
					<section>
						<h2>About the group</h2>
						<p>
							Symfony enthousiasts meeting in Romandie once a month for light talks about the framework eco-system.
						</p>
					</section>
					<section>
						<h2>Suggestions ...</h2>
						<ul>
							<li>Format</li>
							<li>Location</li>
							<li>Frequency</li>
							<li>Kind of talks</li>
							<li>Hackathon</li>
							<li>Barbecue ?</li>
						</ul>
					</section>
					<section>
						<h2>Every last Thusday of the month ?</h2>
					</section>
				</section>

				<section id="capifony">
					<section>
						<h1><a href="http://capifony.org/" title="capifony &amp;mdash; symfony and Symfony2 deployment">Capifony</a></h1>
						<h2>Deployement made easy</h2>
						<p><a href="https://github.com/capistrano/capistrano">Capistrano</a> for symfony projects</p>
					</section>
					<section>
						<pre><code style="font-size: 28px;">
$ cap deploy
						</code></pre>
					</section>
					<section>
						<h2>Capistrano</h2>
						<ul>
							<li>Deployment framework for web applications
								<ul>
									<li>Ruby On Rails applications</li>
									<li>PHP applications</li>
								</ul>
							</li>
							<li>Written in Ruby</li>
						</ul>
					</section>
					<section>
						<h2>Features</h2>
						<ul>
							<li>Automatic deployement</li>
							<li>Rollback</li>
							<li>Execute command (local/remote)</li>
							<li>Multi-stage (with extension)</li>
						</ul>
					</section>
					<section>
						<h2>Requirement</h2>
						<ul>
							<li>Locally
								<ul>
									<li>Ruby and GEM installed</li>
									<li>VCS (Git, Subversion, Mercurial)</li>
								</ul>
							</li>
							<li>On the server
								<ul>
									<li>SSH</li>
									<li>Right to execute binaries (git, cp, ln)</li>
									<li>VCS (Git, Subversion, Mercurial)</li>
								</ul>
							</li>
						</ul>
					</section>
					<section>
						<h2>Deployement strategy</h2>
						<img src="http://capifony.org/images/strategy_a.png" style="border:20px solid white;">
					</section>
					<section>
						<h2>Nice to have</h2>
<pre><code>
  # ~/.ssh/config
  host lsnn
    hostname lsnn.ch
    user mfh
    protocol 2
    ForwardAgent yes
</code></pre>
					</section>
					<section>
						<h2>Remote file structure</h2>
<pre><code>
 .
 |-- current -> ./releases/20130311184017
 |-- releases
 |   |-- 20130301152536
 |   |-- 20130311180450
 |   `-- 20130311184017
 `-- shared
     |-- app
     |   |-- config
     |       `-- parameters.yml
     |-- app
     |   |-- logs
     |       `-- production.log
     `-- web
         `-- uploads
</code></pre>
					</section>
					<section>
						<h1>Capifony Demo</h1>
					</section>
					<section>
						<h2>Setup your Symfony project</h2>
<pre><code>
$ cd my/symfony/project
$ capifony .
[add] writing './Capfile'
[add] writing './app/config/deploy.rb'
[done] symfony 2 project capifonied!

$ edit app/config/deploy.rb
</code></pre>
					</section>
					<section>
						<h2>./Capfile</h2>
<pre><code>
# ./capfile
load 'deploy' if respond_to?(:namespace) # cap2 differentiator

require 'capifony_symfony2'
load 'app/config/deploy'
</code></pre>
					</section>
					<section>
						<h2>./app/config/deploy.rb</h2>
<pre><code>
set :application, "mysite"
set :domain,      "mysite.ch"
set :deploy_to,   "/srv/www/mysite.ch/"
set :app_path,    "app"

set :user,        "sshuser"
set :use_sudo,    false

set :repository,  "git@github.com:username/repository.git"
set :scm,         :git
</code></pre>
					</section>

					<section>
						<h2>./app/config/deploy.rb next</h2>
<pre><code>
# directories that will be shared between all deployments
set :shared_children,     ["app/logs", "web/uploads", "data"]

# share our database configuration
set :shared_files,      ["app/config/parameters.yml"]

set :model_manager, "doctrine"
role :web,        domain                    # Your HTTP server, Apache/etc
role :app,        domain, :primary => true

set  :keep_releases,  3
</code></pre>
					</section>
					<section>
						<h2>./app/config/deploy.rb next</h2>
<pre><code>
set :use_composer, true

set :update_assets_version, false
set :dump_assetic_assets, true

set :model_manager, "doctrine"    # Or: `propel`

set :app_config_file, "parameters.yml"
</code></pre>
					</section>
					<section>
						<h2>Tasks</h2>
<pre><code>
$ cap -T
cap database:dump:local       # Dumps local database
cap database:dump:remote      # Dumps remote database
cap database:move:to_local    # Dumps remote database, download...
cap database:move:to_remote   # Dumps local database, loads it ...
cap deploy                    # Deploys your project.
cap deploy:check              # Test deployment dependencies.
...
</code></pre>
					</section>
					<section>
						<h2>Setup</h2>
<pre><code>
$ cap deploy:setup
</code></pre>
					</section>
					<section>
						<h2>Setup</h2>
<pre><code>
$ cap deploy
</code></pre>
					</section>
					<section>
						<h2>Hook</h2>
<pre><code>
# app/config/deploy.rb
after "deploy", "deploy:cleanup"
before "deploy:migrations", "database:dump:remote"
</code></pre>
					</section>
					<section>
						<h2>Rollback</h2>
<pre><code>
$ cap deploy:rollback
</code></pre>
					</section>
					<section>
						<h2>Useful tasks</h2>
<pre><code>
# If you need to deploy and run your migrations you can call:
$ cap deploy:migrations

# To run your test suite on the production server, just invoke:
$ cap deploy:testall

# You can invoke tasks/commands by calling:
$ cap symfony

# If you want to see all available tasks, you can run:
$ cap -vT
</code></pre>
					</section>
					<section>
						<h2>Ressources</h2>
						<ul>
							<li><a href="http://capistranorb.com/">http://capistranorb.com/</a></li>
							<li><a href="http://capifony.org/">http://capifony.org/</a></li>
							<li><a href="https://help.github.com/articles/deploying-with-capistrano">https://help.github.com/articles/deploying-with-capistrano</a></li>
							<li><a href="https://github.com/antistatique/capistrano-drupal">https://github.com/antistatique/capistrano-drupal</a></li>
						</ul>
					</section>
				</section>
				<section id="feedback">
					<section>
						<h2>Feedback from Symfony User Group Zurich</h2>
					</section>
					<section>
						<img src="assets/meetup_sfugzh.png">
					</section>
					<section>
						<h2>Elastic Search with PHP</h2>
						<ul>
							<li>Slides : <a href="http://fr.slideshare.net/liip/elastic-searchingwithphp-zurich" title="Elastic Searching With PHP">http://fr.slideshare.net/liip/elastic-searchingwithphp-zurich</a></li>
							<li>Elastica</li>
							<li>FOSElasticaBundle</li>
						</ul>
					</section>
				</section>
				<section id="catering">
					<section>
						<h1>Beer</h1>
					</section>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
